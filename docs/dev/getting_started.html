<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; MAESTROeX  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/theme_overrides.css?v=10589de1" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "macros": {"rhozero": "{\\rho_0}", "pizero": "{\\pi_0}", "pizeroone": "{\\pi_0^{(1)}}", "pizerotwo": "{\\pi_0^{(2)}}", "gammabar": "{\\overline{\\Gamma}_1}", "ptl": "{\\partial}", "eb": "{{\\bf e}}", "fb": "{{\\bf f}}", "ib": "{{\\bf i}}", "Ub": "{{\\bf U}}", "Vb": "{{\\bf V}}", "xb": "{{\\bf x}}", "ut": "{{\\tilde{u}}}", "vt": "{{\\tilde{v}}}", "wt": "{{\\tilde{w}}}", "Ubt": "{\\widetilde{\\Ub}}", "edge": "{{\\rm EDGE}}", "mac": "{{\\rm MAC}}", "trans": "{{\\rm TRANS}}", "nablab": "{\\mathbf{\\nabla}}", "cdotb": "{\\mathbf{\\cdot}}", "half": "{\\frac{1}{2}}", "myhalf": "{\\frac{1}{2}}", "nph": "{{n + \\myhalf}}", "nmh": "{{n - \\myhalf}}", "Hext": "{{H_{\\rm ext}}}", "Hnuc": "{{H_{\\rm nuc}}}", "kth": "{k_{\\rm th}}", "init": "{\\rm init}", "model": "{\\rm model}", "raw": "{\\rm raw}", "pred": "{{\\rm pred}}", "Sbar": "{\\overline{S}}", "inp": "{\\mathrm{in}}", "initp": "{\\mathrm{init}}", "outp": "{\\mathrm{out}}", "uadv": "{\\widetilde{\\mathbf{U}}^{\\mathrm{ADV}}}", "uadvone": "{\\widetilde{\\mathbf{U}}^{\\mathrm{ADV},\\star}}", "uadvonedag": "{\\Ubt^{\\mathrm{ADV},\\dagger,\\star}}", "uadvtwo": "{\\widetilde{\\mathbf{U}}^{\\mathrm{ADV}}}", "uadvtwodag": "{\\Ubt^{\\mathrm{ADV},\\dagger}}", "uadvsdcstar": "{\\mathbf{U}^{\\mathrm{ADV},\\star}}", "uadvsdcpred": "{\\mathbf{U}^{\\mathrm{ADV},\\mathrm{pred}}}", "uadvsdc": "{\\mathbf{U}^{\\mathrm{ADV}}}", "dt": "{\\Delta t}", "dr": "{\\Delta r}", "etarho": "{\\eta_{\\rho}}", "etarhoec": "{\\etarho^{\\rm ec}}", "etarhocc": "{\\etarho^{\\rm cc}}", "etarhoflux": "{\\etarho^{\\rm flux}}", "divetarho": "{\\nabla\\cdot(\\etarho\\eb_r)}", "ow": "{\\overline{w}_0}", "dw": "{\\delta w_0}", "thalf": "{\\frac{3}{2}}", "rhop": "{{\\rho^{\\prime}}}", "omegadot": "{\\dot{\\omega}}", "er": "{\\mathbf{e}_r}", "ex": "{\\mathbf{e}_x}", "ey": "{\\mathbf{e}_y}", "ez": "{\\mathbf{e}_z}", "Omegab": "{{\\bf \\Omega}}", "rb": "{{\\bf r}}", "boxtype": "{{\\tt box\\/}}", "fab": "{{\\tt fab\\/}}", "multifab": "{{\\tt multifab\\/}}", "boxarray": "{{\\tt boxarray\\/}}", "mlboxarray": "{{\\tt ml\\_boxarray\\/}}", "layout": "{{\\tt layout\\/}}", "mllayout": "{{\\tt ml\\_layout\\/}}", "bctower": "{{\\tt bc\\_tower\\/}}", "bclevel": "{{\\tt bc\\_level\\/}}", "mgtower": "{{\\tt mg\\_tower\\/}}", "bndryreg": "{{\\tt bndry\\_reg\\/}}", "runparam": ["{\\index{Runtime parameters!{\\tt #1}}{\\tt #1}}", 1], "runparamidx": ["{\\index{Runtime parameters!{\\tt #1}}}", 1], "code": ["{\\index{Code reference!{\\tt #1}}{\\tt #1}}", 1], "codeidx": ["{\\index{Code reference!{\\tt #1}}}", 1], "otherindex": ["{\\index{#1!#2}}", 2], "fdamp": "{{f_\\mathrm{damp}}}"}}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Adding A New Problem" href="addproblem.html" />
    <link rel="prev" title="Governing Equations" href="flowchart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


          
          
          <a href="index.html" class="icon icon-home">
            MAESTROeX
              <img src="_static/maestroex_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
    <div class="branch">
        Branch: <a href="../getting_started.html">main</a> | <a href="./getting_started.html">development</a>
    </div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">MAESTROeX basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="preface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to MAESTROeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="flowchart.html">Governing Equations</a></li>
<li class="toctree-l1"><a class="reference internal" href="flowchart.html#numerical-methodology">Numerical Methodology</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using MAESTROeX</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-the-output">Working with the Output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#amrvis">Amrvis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#amrpostprocessing-scripts">AmrPostprocessing scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visit">VisIt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yt">yt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#diagnostic-files">Diagnostic Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development-model">Development Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parallel-jobs">Parallel Jobs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="addproblem.html">Adding A New Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems.html">Problem Setups</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit_tests.html">Unit Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="param_intro.html">Runtime Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="initial_models.html">Initial Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">GPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="base_state.html">Base State</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="makefiles.html">MAESTROeX Build System</a></li>
<li class="toctree-l1"><a class="reference internal" href="managingjobs.html">Managing Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MAESTROeX technical details</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lo_density.html">Low Density Cutoffs</a></li>
<li class="toctree-l1"><a class="reference internal" href="volume_discrepancy.html">Volume Discrepancy Factor</a></li>
<li class="toctree-l1"><a class="reference internal" href="eos_notes.html">Equation of State Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="networks.html">Reaction Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="eta.html">The Mixing Term, <span class="math notranslate nohighlight">\(\etarho\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="eta.html#eta-flow-chart"><span class="math notranslate nohighlight">\(\eta\)</span> Flow Chart</a></li>
<li class="toctree-l1"><a class="reference internal" href="eta.html#computing-etarhoec-and-etarhocc">Computing <span class="math notranslate nohighlight">\(\etarhoec\)</span> and <span class="math notranslate nohighlight">\(\etarhocc\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="eta.html#using-etarhoec">Using <span class="math notranslate nohighlight">\(\etarhoec\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="eta.html#using-etarhocc">Using <span class="math notranslate nohighlight">\(\etarhocc\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="pert.html">Interface State Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="Godunov.html">Godunov Interface States</a></li>
<li class="toctree-l1"><a class="reference internal" href="mg.html">Multigrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="rotation.html">Rotation in MAESTROeX</a></li>
<li class="toctree-l1"><a class="reference internal" href="spherical_basestate.html">Modifications for a Spherical Self-Gravitating Star</a></li>
<li class="toctree-l1"><a class="reference internal" href="planar_invsq_basestate.html">Modifications for a <span class="math notranslate nohighlight">\(1/r^2\)</span> Plane-Parallel Basestate</a></li>
<li class="toctree-l1"><a class="reference internal" href="thermo_notes.html">Notes on Thermodynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="beta0.html">Notes on <span class="math notranslate nohighlight">\(\beta_0\)</span></a></li>
<li class="toctree-l1"><a class="reference internal" href="enthalpy.html">Notes on Enthalpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="regtest.html">Regression Testing and Continuous Integration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="filelist.html">File list</a></li>
<li class="toctree-l1"><a class="reference internal" href="classlist.html">Class list</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MAESTROeX</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/getting_started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h1>
<p>In this chapter we give an overview of MAESTROeX, including some of the
standard problems, how to run the code, some basic runtime parameters,
and how to look at the output.</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h2>
<p>MAESTROeX requires a C++ compiler that supports the C++17 standard and
a C compiler that supports the C99 standard. Several compiler suites
are supported, including GNU, Intel, LLVM and Cray. GNU Make (&gt;= 3.82)
is also required, as is Python (&gt;= 3.9) and standard tools available
in any Unix-like environments (e.g., Perl and <code class="docutils literal notranslate"><span class="pre">sed</span></code>).</p>
<p>For running in parallel, an MPI library and/or OpenMP is required.
For running on GPUs, CUDA 11 or later is required (see <a class="reference internal" href="gpu.html#sec-gpu"><span class="std std-ref">GPU</span></a> for
more information).</p>
</section>
<section id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Link to this heading"></a></h2>
<p>Here we will run the standard reacting_bubble problem (three
reacting bubbles in a plane-parallel stratified atmosphere) on a
single processor <a class="footnote-reference brackets" href="#id3" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>. This test problem was shown in
paper 3.</p>
<ol class="arabic">
<li><p><em>Get a copy of MAESTROeX</em>.</p>
<p>If you don’t already have a copy of MAESTROeX, you can obtain one
from the project’s github page:
<a class="reference external" href="https://github.com/AMReX-Astro/MAESTROeX">https://github.com/AMReX-Astro/MAESTROeX</a>  . There are several
options: you can fork it directly on github (recommended if
you intend to develop the code) or clone it using git from the
project page by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">AMReX</span><span class="o">-</span><span class="n">Astro</span><span class="o">/</span><span class="n">MAESTROeX</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>MAESTROeX is under active development, so you will want to keep in
sync with the changes by periodically pulling from the repository.
Simply type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
<p>in the <code class="docutils literal notranslate"><span class="pre">MAESTROeX/</span></code> directory.</p>
</li>
<li><p><em>Get a copy of Microphysics</em>.</p>
<p>MAESTROeX and its compressible counterpart CASTRO share a
common-set of microphysics solvers (nuclear reaction networks and
equations of state). These are kept in a separate repo.
There are two ways to access the Microphysics repo: you can use a
submodule or clone the Microphysics repo itself.</p>
<p>If you choose to use the submodule, enter the <code class="docutils literal notranslate"><span class="pre">MAESTROeX/</span></code>
directory and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">init</span>
</pre></div>
</div>
<p>Note that in the future when you pull MAESTROeX, to make sure the
Microphysics submodule is also updated you must instead use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">pull</span> <span class="o">--</span><span class="n">recurse</span><span class="o">-</span><span class="n">submodules</span>
</pre></div>
</div>
<p>Alternatively, you can run the following command on your system to
ensure that updating the submodules upon a git pull is the default
behavior:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">submodule</span><span class="o">.</span><span class="n">recurse</span> <span class="n">true</span>
</pre></div>
</div>
<p>If you choose to use the Microphysics repo directly, it is
available on github and can be obtained via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">AMReX</span><span class="o">-</span><span class="n">Astro</span><span class="o">/</span><span class="n">Microphysics</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Next you must specify the path to the Microphysics repository as
a global environment variable on your machine, <code class="docutils literal notranslate"><span class="pre">MICROPHYSICS_HOME</span></code></p>
<p>You will periodic want to update Microphysics by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
<p>in the <code class="docutils literal notranslate"><span class="pre">Microphysics/</span></code> directory.</p>
</li>
<li><p><em>Get a copy of AMReX</em>.</p>
<p>MAESTROeX requires the AMReX library to manage the grids and
parallelization. We also rely on the build system in AMReX to
build a MAESTROeX executable. AMReX is also available on github
and can be obtained via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">AMReX</span><span class="o">-</span><span class="n">Codes</span><span class="o">/</span><span class="n">amrex</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>You will periodic want to update AMReX by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
<p>in the <code class="docutils literal notranslate"><span class="pre">amrex/</span></code> directory.</p>
</li>
<li><p><em>Setup your shell environment</em>.</p>
<p>MAESTROeX needs to know where to find AMReX, by specifying the
<code class="docutils literal notranslate"><span class="pre">AMREX_HOME</span></code> environment variable, and where to find
Microphysics, by specifying the <code class="docutils literal notranslate"><span class="pre">MICROPHYSICS_HOME</span></code> environment
variable.</p>
<p>If your shell is Bash, add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">AMREX_HOME</span><span class="o">=</span><span class="s2">&quot;/path/to/amrex/&quot;</span>
<span class="n">export</span> <span class="n">MICROPHYSICS_HOME</span><span class="o">=</span><span class="s2">&quot;/path/to/Microphysics/&quot;</span>
</pre></div>
</div>
<p>to your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>.</p>
<p>If your shell is Csh/Tcsh, add:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">setenv</span> <span class="n">AMREX_HOME</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">amrex</span><span class="o">/</span>
<span class="n">setenv</span> <span class="n">MICROPHYSICS_HOME</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">Microphysics</span><span class="o">/</span>
</pre></div>
</div>
<p>to your <code class="docutils literal notranslate"><span class="pre">.cshrc</span></code>.</p>
<p>Note: you must specify the full path to the <code class="docutils literal notranslate"><span class="pre">amrex/</span></code> and
<code class="docutils literal notranslate"><span class="pre">Microphysics/</span></code> directory. Do not use “<span class="math notranslate nohighlight">\(\sim\)</span>” to refer to your
home directory—the scripts used by the build system will not be
able to process this.</p>
</li>
<li><p><em>Setup the problem’s GNUmakefile</em>.</p>
<p>In MAESTROeX, each problem lives under one of three sub-directories
of <code class="docutils literal notranslate"><span class="pre">MAESTROeX/Exec/</span></code>: <code class="docutils literal notranslate"><span class="pre">SCIENCE/</span></code>, <code class="docutils literal notranslate"><span class="pre">TEST_PROBLEMS/</span></code>, or
<code class="docutils literal notranslate"><span class="pre">UNIT_TESTS/</span></code>. This problem sub-directory will contain any
problem-specific files as well as the <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code> that
specifies how to build the executable. Note: we rely on features of
GNU make. Full details of the <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code> can be found in §
<a class="reference internal" href="addproblem.html#sec-adding-problems"><span class="std std-ref">Adding A New Problem</span></a>. Here we will
configure for a serial build.</p>
<p>Change directory to
<code class="docutils literal notranslate"><span class="pre">MAESTROeX/Exec/TEST_PROBLEMS/reacting_bubble/</span></code>.
We only need to worry about the options at the very top of the
GNUmakefile for now. These should be set as follows:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">DEBUG</span> <span class="pre">:=</span> <span class="pre">TRUE</span></code></p>
<p>This option determines whether we compile with support for
less-optimized code with debugging runtime checks. Setting
<code class="docutils literal notranslate"><span class="pre">DEBUG</span> <span class="pre">:=</span> <span class="pre">FALSE</span></code> turns off debugging.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DIM</span> <span class="pre">:=</span> <span class="pre">2</span></code></p>
<p>The dimensionality of the problem must be specified at compile-time.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">COMP</span> <span class="pre">:=</span> <span class="pre">gnu</span></code></p>
<p>This option specifies the gnu compiler suite (e.g., g++).
We will use gnu, which is the preferred compiler suite for MAESTROeX.
Specifying this compiler will automatically pull in the compiler
settings as specified in <code class="docutils literal notranslate"><span class="pre">AMREX_HOME/Tools/GNUMake/Make.defs</span></code>.
(Alternate compiler choices include
<code class="docutils literal notranslate"><span class="pre">intel</span></code>, <code class="docutils literal notranslate"><span class="pre">cray</span></code>, and <code class="docutils literal notranslate"><span class="pre">pgi</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">USE_MPI</span> <span class="pre">:=</span> <span class="pre">TRUE</span></code></p>
<p>This determines whether we are doing a parallel build, using the
Message Passing Interface (MPI) library. If you set this option
to FALSE, you will disable MPI and will build MAESTROeX in
serial mode, so no MPI library needs to be present on the host
system.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">USE_OMP</span> <span class="pre">:=</span> <span class="pre">FALSE</span></code></p>
<p>This determines whether we are using OpenMP to do parallelism
within a shared memory node. OpenMP is used together with MPI,
with MPI distributing the grids across the processors and within a
shared-memory node, OpenMP allows many cores to operate on the
same grid. For now, we leave this option as FALSE, disabling OpenMP.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">USE_REACT</span> <span class="pre">:=</span> <span class="pre">TRUE</span></code></p>
<p>Some test problems in MAESTROeX do not use reactions, so there is an
option to disable the compilation of reaction-specific source code.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TINY_PROFILE</span> <span class="pre">:=</span> <span class="pre">FALSE</span></code></p>
<p>Profiling tool that generates a text file with profiling information.
Refer to the AMReX User’s Guide at
<a class="reference external" href="https://amrex-codes.github.io/amrex/">https://amrex-codes.github.io/amrex/</a></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">PROFILE</span> <span class="pre">:=</span> <span class="pre">FALSE</span></code></p>
<p>More advanced profiling tool that generates a text file with
profiling information, or data files that can be interpreted
with a special build of amrvis. Selecting TRUE overrides the
<code class="docutils literal notranslate"><span class="pre">TINY_PROFILE</span> <span class="pre">setting</span></code>.  Refer to the AMReX User’s Guide at
<a class="reference external" href="https://amrex-codes.github.io/amrex/">https://amrex-codes.github.io/amrex/</a></p>
</li>
</ul>
</li>
<li><p><em>Build the executable</em>.</p>
<p>Type <code class="docutils literal notranslate"><span class="pre">make</span></code>. The build system will first find the dependencies
amongst all the source files and then build the executable. When
finished, the executable will have a name like
<code class="docutils literal notranslate"><span class="pre">Maestro2d.gnu.DEBUG.MPI.ex</span></code>, where the specific parts of the name
depend on the options used in <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code>.</p>
<p>Note, at the end of the build process, a link will be made in the
current directory to the data table needed for the equation of state
(<code class="docutils literal notranslate"><span class="pre">Microphysics/EOS/helmholtz/helm_table.dat</span></code>).</p>
</li>
<li><p><em>Run!</em></p>
<p>Each problem requires an input file. The inputs file consists of
lines of the form <em>parameter = value</em>, where <em>parameter</em> is one of
the many runtime parameters MAESTROeX knows, and <em>value</em> overrides
the default value for that parameter. For the <code class="docutils literal notranslate"><span class="pre">reacting_bubble</span></code>
problem, we will use the inputs file <code class="docutils literal notranslate"><span class="pre">inputs_2d_C</span></code>. An overview
of some of the more common runtime parameters is given in § <a class="reference external" href="#sec:gettingstarted:runtime">5</a>, and a full list of all
MAESTROeX runtime parameters and their default values is given in
Chapter <a class="reference internal" href="param_intro.html#sec-runtime-parameters"><span class="std std-ref">Runtime Parameters</span></a>.</p>
<p>MAESTROeX is run simply as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Maestro2d</span><span class="o">.</span><span class="n">gnu</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">MPI</span><span class="o">.</span><span class="n">ex</span> <span class="n">inputs_2d_C</span>
</pre></div>
</div>
<p>or to run in parallel on a local workstation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpiexec</span> <span class="o">-</span><span class="n">n</span> <span class="mi">4</span> <span class="o">./</span><span class="n">Maestro2d</span><span class="o">.</span><span class="n">gnu</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">MPI</span><span class="o">.</span><span class="n">ex</span> <span class="n">inputs_2d_C</span>
</pre></div>
</div>
<p>We can also override the default value of any runtime parameter by
specifying it on the commandline as, e.g.,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Maestro2d</span><span class="o">.</span><span class="n">gnu</span><span class="o">.</span><span class="n">DEBUG</span><span class="o">.</span><span class="n">MPI</span><span class="o">.</span><span class="n">ex</span> <span class="n">inputs_2d_C</span> <span class="n">maestro</span><span class="o">.</span><span class="n">max_step</span><span class="o">=</span><span class="mi">0</span> <span class="n">amr</span><span class="o">.</span><span class="n">n_cell</span><span class="o">=</span><span class="mi">192</span> <span class="mi">320</span>
</pre></div>
</div>
<p>As the code runs, a lot of information will pass through the
screen.  For each timestep, each of the steps 1 through 12 shown in
the MAESTROeX flowchart (Chapter <a class="reference internal" href="flowchart.html#ch-flowchart"><span class="std std-ref">Governing Equations</span></a>) will be shown along with diagnostic information
about the solution. Upon completion some memory usage information
is printed.</p>
</li>
<li><p><em>Examine the output</em>.</p>
<p>As the code runs, it will output both plotfiles and checkpoints as
well as one or more text diagnostic files (this is currently only
implemented for spherical problems)
with integral or extrema information (like maximum Mach number)
from each timestep.</p>
<p>By default, the plotfiles will be named plt<em>nnnnnnn</em>, where
the number <em>nnnnnnn</em> is the timestep number when the file was
outputted. Similarly, the checkpoints are named
chk<em>nnnnnnn</em>. AMReX plotfiles and checkpoints are actually
directories, with the data stored in sub-directories grouped by
refinement level. Details of the simulation (build information,
number of processors used, output date, output directory, runtime
parameter values, …) are stored in the plaintext <code class="docutils literal notranslate"><span class="pre">job_info</span></code>
file in each plotfile and checkpoint directory.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>unless otherwise specified all quantities in
MAESTROeX are assumed to be in CGS units.</p>
</div>
<p>Visualization of results is described in the next section.</p>
</li>
</ol>
</section>
<section id="working-with-the-output">
<h2>Working with the Output<a class="headerlink" href="#working-with-the-output" title="Link to this heading"></a></h2>
<p>Visualization and analysis are done on the plotfiles. A number of
in-house and externally developed tools can work with AMReX-formatted
plotfiles <a class="footnote-reference brackets" href="#id4" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>.
An example plot of the <code class="docutils literal notranslate"><span class="pre">reacting_bubble</span></code> problem run above is
shown in the figure below:</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="_images/plt00133_tfromp.png"><img alt="AmrPostprocessing plot" src="_images/plt00133_tfromp.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">Visualization of the final output of the reacting_bubble problem
showing the temperature field (as derived from the pressure). This
plot was done with the AmrPostprocessing tools.</span><a class="headerlink" href="#id5" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="amrvis">
<h3>Amrvis<a class="headerlink" href="#amrvis" title="Link to this heading"></a></h3>
<p>Amrvis is an easy-to-use visualization tool developed at LBL for
2- and 3D datasets which can plot slices through 3D datasets as well
as volume-renderings. It can also very easily extract 1D lines
through the dataset along any coordinate direction. It is distributed
separately from the MAESTROeX distribution.</p>
<p>Amrvis can be obtained via git from github as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">AMReX</span><span class="o">-</span><span class="n">Codes</span><span class="o">/</span><span class="n">Amrvis</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Also, to build a 3D version of Amrvis you need to obtain volpack using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">ccse</span><span class="o">.</span><span class="n">lbl</span><span class="o">.</span><span class="n">gov</span><span class="o">/</span><span class="n">pub</span><span class="o">/</span><span class="n">Downloads</span><span class="o">/</span><span class="n">volpack</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Amrvis uses the Motif library for defining the GUI. On a Linux
system, you may need to install the lesstif package and any
related development packages (e.g. lesstif-devel). Depending
on your Linux system, you may also need to install libXpm and
related development packages (e.g. libXpm-devel).</p>
</section>
<section id="amrpostprocessing-scripts">
<h3>AmrPostprocessing scripts<a class="headerlink" href="#amrpostprocessing-scripts" title="Link to this heading"></a></h3>
<p>Several useful analysis scripts can be found
in the <code class="docutils literal notranslate"><span class="pre">amrex-astro-diag</span></code> project:</p>
<p><a class="reference external" href="https://github.com/amrex-astro/amrex-astro-diag">https://github.com/amrex-astro/amrex-astro-diag</a></p>
</section>
<section id="visit">
<h3>VisIt<a class="headerlink" href="#visit" title="Link to this heading"></a></h3>
<p>VisIt is a DOE-supported visualization tool for 2- and 3D datasets. It
can do contouring, volume rendering, streamlines, …  , directly from
AMReX plotfiles. Details on VisIt can be found at:
<a class="reference external" href="https://wci.llnl.gov/codes/visit/home.html">https://wci.llnl.gov/codes/visit/home.html</a> .  The easiest way to get
started with VisIt is to download a precompiled binary from the VisIt
webpage.</p>
<p>Once VisIt is installed, you can open a AMReX plotfile by pointing
VisIt to the Header file in the plotfile directory.</p>
</section>
<section id="yt">
<h3>yt<a class="headerlink" href="#yt" title="Link to this heading"></a></h3>
<p>yt (version 3.0 and later) can natively read the MAESTROeX plotfiles. See
the yt documentation or § <a class="reference internal" href="visualization.html#sec-vis-yt"><span class="std std-ref">Visualizing with yt</span></a>.</p>
</section>
<section id="diagnostic-files">
<h3>Diagnostic Files<a class="headerlink" href="#diagnostic-files" title="Link to this heading"></a></h3>
<p>By default, MAESTROeX outputs global diagnostics each timestep into 3
files called <code class="docutils literal notranslate"><span class="pre">diag_vel.out</span></code>, <code class="docutils literal notranslate"><span class="pre">diag_temp.out</span></code>, and <code class="docutils literal notranslate"><span class="pre">diag_enuc.out</span></code>
for spherical problems (ex. <code class="docutils literal notranslate"><span class="pre">wdconvect</span></code>).
These include various properties such as the maximum Mach number,
peak temperature, and peak nuclear energy generation rate, respectively.
Individual problems can provide their own <code class="docutils literal notranslate"><span class="pre">diag.F90</span></code> file to
produce custom diagnostic output. This information can be plotted
directly with GNUplot, for example.</p>
</section>
</section>
<section id="development-model">
<h2>Development Model<a class="headerlink" href="#development-model" title="Link to this heading"></a></h2>
<p>When you clone MAESTROeX from github, you will be on the main
branch of the repo. New changes to MAESTROeX are first introduced
into the development branch in the MAESTROeX git repository.
Nightly regression tests are run on development to ensure that
our answers don’t change. Around the first work day of each month, we
merge from development <span class="math notranslate nohighlight">\(\rightarrow\)</span> main (assuming
tests pass) and tag the state of the code with a date-based tag
YY-MM. We do this on all the other repos in the AMReX-ecosystem,
including amrex/, Microphysics/, and Castro/.</p>
<p>If you want to contribute to MAESTROeX’s development, issue a pull-request
through GitHub from your fork of MAESTROeX and target the development
branch. (If you mistakenly target main, we can change it for you.)</p>
</section>
<section id="parallel-jobs">
<h2>Parallel Jobs<a class="headerlink" href="#parallel-jobs" title="Link to this heading"></a></h2>
<p>To run in parallel with MPI, you would set <code class="docutils literal notranslate"><span class="pre">USE_MPI</span> <span class="pre">:=</span> <span class="pre">TRUE</span></code> in your
GNUmakefile. For a machine with working MPI compiler wrappers
(mpif90 and mpicc), the build system should find these and
compile with MPI support automatically. This is the easiest way to do
a parallel build, and should work on most Linux systems.</p>
<p>More generally, the build system needs to know about your MPI
installation. For popular national computing facilities, this is
already setup, and the build system looks at the machine hostname to
set the proper libraries. For other machines, you may need to edit
the GMake.MPI file in the AMReX build files. See
§ <a class="reference internal" href="makefiles.html#ch-make"><span class="std std-ref">MAESTROeX Build System</span></a> for more details.</p>
<p>OpenMP can be used to parallelize on shared-memory machines
(i.e. within a node). OpenMP support is accomplished through the
compiler.  Setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">USE_OMP</span> <span class="o">=</span> <span class="n">TRUE</span>
</pre></div>
</div>
<p>in the <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code> will enable the proper compiler flags to build
with OpenMP. Note: not all MAESTROeX modules have OpenMP support.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>In earlier versions of MAESTROeX this
problem was called test2</p>
</aside>
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>The plotfiles are in the same format as those made
by the BoxLib library upon which MAESTROeX was previously based.</p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="flowchart.html" class="btn btn-neutral float-left" title="Governing Equations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="addproblem.html" class="btn btn-neutral float-right" title="Adding A New Problem" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2023, MAESTROeX development tem.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  


</body>
</html>